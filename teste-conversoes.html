<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Convers√µes - Zap Gr√°fica</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .test-button { 
            background: #25D366; color: white; padding: 15px 30px; 
            border: none; border-radius: 10px; margin: 10px; 
            cursor: pointer; font-size: 16px; 
        }
        .test-button:hover { background: #20b358; }
        .result { 
            background: #f0f0f0; padding: 15px; margin: 10px 0; 
            border-radius: 5px; border-left: 4px solid #4CAF50; 
        }
        .warning { border-left-color: #ff9800; background: #fff3e0; }
        .info { border-left-color: #2196f3; background: #e3f2fd; }
    </style>
</head>
<body>
    <h1>üß™ Teste de Convers√µes</h1>
    
    <div class="info">
        <h3>‚ÑπÔ∏è Como Testar</h3>
        <p>1. Abra o console do navegador (F12)</p>
        <p>2. Clique nos bot√µes abaixo</p>
        <p>3. Verifique as mensagens no console</p>
        <p>4. Verifique no Google Ads/Facebook se as convers√µes aparecem</p>
    </div>

    <h2>üîß Status das Ferramentas</h2>
    <div id="status-tools"></div>

    <h2>üéØ Testes de Convers√£o</h2>
    
    <button class="test-button" onclick="testFormStart()">
        üöÄ Testar InitiateCheckout (In√≠cio Formul√°rio)
    </button>
    
    <button class="test-button" onclick="testWhatsAppConversion()">
        üì± Testar Convers√£o WhatsApp
    </button>
    
    <button class="test-button" onclick="testFormConversion()">
        üìù Testar Convers√£o Formul√°rio
    </button>
    
    <button class="test-button" onclick="testNonConversion()">
        ‚ùå Testar Evento N√ÉO-Convers√£o
    </button>

    <h2>üìä Resultados dos Testes</h2>
    <div id="test-results"></div>

    <script>
        // Verifica se as ferramentas est√£o carregadas
        function checkToolsStatus() {
            const statusDiv = document.getElementById('status-tools');
            let html = '';
            
            html += `<div class="result ${typeof gtag !== 'undefined' ? '' : 'warning'}">`;
            html += `Google Ads/Analytics: ${typeof gtag !== 'undefined' ? '‚úÖ Carregado' : '‚ùå N√£o carregado'}`;
            html += `</div>`;
            
            html += `<div class="result ${typeof fbq !== 'undefined' ? '' : 'warning'}">`;
            html += `Facebook Pixel: ${typeof fbq !== 'undefined' ? '‚úÖ Carregado' : '‚ùå N√£o carregado'}`;
            html += `</div>`;
            
            html += `<div class="result ${typeof dataLayer !== 'undefined' ? '' : 'warning'}">`;
            html += `DataLayer: ${typeof dataLayer !== 'undefined' ? '‚úÖ Carregado' : '‚ùå N√£o carregado'}`;
            html += `</div>`;
            
            statusDiv.innerHTML = html;
        }

        // Fun√ß√£o para adicionar resultado
        function addResult(message, type = 'result') {
            const resultsDiv = document.getElementById('test-results');
            const resultDiv = document.createElement('div');
            resultDiv.className = `result ${type}`;
            resultDiv.innerHTML = `<strong>${new Date().toLocaleTimeString()}:</strong> ${message}`;
            resultsDiv.appendChild(resultDiv);
        }

        // Teste in√≠cio do formul√°rio (InitiateCheckout)
        function testFormStart() {
            console.log('üß™ TESTE: InitiateCheckout (in√≠cio formul√°rio) iniciado');
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'form_start', {
                    'event_category': 'engagement',
                    'event_label': 'test_form_interaction'
                });
                addResult('Google Analytics: Evento form_start enviado', 'info');
            } else {
                addResult('Google Analytics: N√£o carregado', 'warning');
            }
            
            if (typeof fbq !== 'undefined') {
                fbq('track', 'InitiateCheckout', {
                    content_name: 'formulario_orcamento_inicio_test',
                    content_category: 'form_interaction',
                    value: 100.00,
                    currency: 'BRL'
                });
                addResult('Facebook: InitiateCheckout enviado', 'result');
            } else {
                addResult('Facebook Pixel: N√£o carregado', 'warning');
            }
        }

        // Teste convers√£o WhatsApp
        function testWhatsAppConversion() {
            console.log('üß™ TESTE: Convers√£o WhatsApp iniciada');
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'conversion', {
                    'send_to': 'AW-1001326878/ydbnCPygueQaEJ6SvN0D', // ID real WhatsApp
                    'value': 50.00,
                    'currency': 'BRL',
                    'transaction_id': 'test_whatsapp_' + Date.now()
                });
                addResult('Google Ads: Convers√£o WhatsApp enviada', 'result');
            } else {
                addResult('Google Ads: N√£o carregado', 'warning');
            }
            
            if (typeof fbq !== 'undefined') {
                fbq('track', 'Lead', {
                    content_name: 'whatsapp_test',
                    content_category: 'test_conversion',
                    value: 50.00,
                    currency: 'BRL'
                });
                addResult('Facebook: Convers√£o Lead enviada', 'result');
            } else {
                addResult('Facebook Pixel: N√£o carregado', 'warning');
            }
        }

        // Teste convers√£o formul√°rio
        function testFormConversion() {
            console.log('üß™ TESTE: Convers√£o Formul√°rio iniciada');
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'conversion', {
                    'send_to': 'AW-1001326878/jByTCP-gueQaEJ6SvN0D', // ID real Formul√°rio
                    'value': 100.00,
                    'currency': 'BRL',
                    'transaction_id': 'test_form_' + Date.now()
                });
                addResult('Google Ads: Convers√£o Formul√°rio enviada', 'result');
            } else {
                addResult('Google Ads: N√£o carregado', 'warning');
            }
            
            if (typeof fbq !== 'undefined') {
                fbq('track', 'Lead', {
                    content_name: 'form_test',
                    content_category: 'test_conversion',
                    value: 100.00,
                    currency: 'BRL'
                });
                addResult('Facebook: Convers√£o Lead enviada', 'result');
            } else {
                addResult('Facebook Pixel: N√£o carregado', 'warning');
            }
        }

        // Teste evento que N√ÉO deve ser convers√£o
        function testNonConversion() {
            console.log('üß™ TESTE: Evento sem convers√£o iniciado');
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'page_scroll', {
                    'event_category': 'engagement',
                    'event_label': 'test_scroll'
                });
                addResult('Google Analytics: Evento de scroll enviado (N√ÉO convers√£o)', 'info');
            }
            
            // Intencionalmente N√ÉO enviamos para Facebook
            addResult('Facebook: Nenhum evento enviado (correto para n√£o-convers√µes)', 'info');
        }

        // Carrega status ao carregar p√°gina
        document.addEventListener('DOMContentLoaded', checkToolsStatus);
    </script>
</body>
</html>
